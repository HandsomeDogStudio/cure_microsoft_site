@using ProjectCure.Web.Models;
@using ProjectCureData.Models;
@model UserListModel
@{ ViewBag.Title = "User management"; }

<h1>User management</h1>
<p>Click on a name to make changes.</p>

<button type="button" class="btn btn-primary new-user pull-right" data-toggle="modal" data-target=".new-user-modal-lg">Add a new user</button>

<table class="table table-striped table-hover">
    <thead>
        <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Role</th>
            <th>Next event</th>
            <th colspan="2" class="align-right">Manage</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var u in Model.Users)
        {
        <tr class="@(u.UserActiveIn ? "" : "user-inactive")">
            <td>@u.UserFirstName @u.UserLastName</td>
            <td>@u.UserEmail</td>
            <td>@u.Role.RoleName</td>
            <td><!-- TODO: display next event name, date, and start time like this: HCA - May 5th 3:00PM --></td>
            <td>
                @using (Html.BeginForm("ResetPassword", "User", new { id = u.UserId }))
                {
                    <button type="submit" class="btn btn-link">Reset password</button>
                }
            </td>
            <td class="align-right">
                @Html.ActionLink("Edit", "Edit", new { id = u.UserId }, new { /*data_toggle = "modal", data_target = ".bs-example-modal-lg"*/ })
            </td>
        </tr>
        }
    </tbody>
</table>
